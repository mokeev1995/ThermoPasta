CREATE TABLE [dbo].[AspNetRoles] (
    [Id] [nvarchar](128) NOT NULL,
    [Name] [nvarchar](256) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetRoles] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[AspNetUsers] (
    [Id] [nvarchar](128) NOT NULL,
    [Email] [nvarchar](256),
    [EmailConfirmed] [bit] NOT NULL,
    [PasswordHash] [nvarchar](max),
    [SecurityStamp] [nvarchar](max),
    [PhoneNumber] [nvarchar](max),
    [PhoneNumberConfirmed] [bit] NOT NULL,
    [TwoFactorEnabled] [bit] NOT NULL,
    [LockoutEndDateUtc] [datetime],
    [LockoutEnabled] [bit] NOT NULL,
    [AccessFailedCount] [int] NOT NULL,
    [UserName] [nvarchar](256) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetUsers] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[AspNetUserClaims] (
    [Id] [int] NOT NULL IDENTITY,
    [UserId] [nvarchar](128) NOT NULL,
    [ClaimType] [nvarchar](max),
    [ClaimValue] [nvarchar](max),
    CONSTRAINT [PK_dbo.AspNetUserClaims] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserClaims]([UserId])
CREATE TABLE [dbo].[AspNetUserLogins] (
    [LoginProvider] [nvarchar](128) NOT NULL,
    [ProviderKey] [nvarchar](128) NOT NULL,
    [UserId] [nvarchar](128) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey], [UserId])
)
CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserLogins]([UserId])
CREATE TABLE [dbo].[CheckCodes] (
    [Id] [nvarchar](128) NOT NULL,
    [Code] [nvarchar](4) NOT NULL,
    [Time] [datetime] NOT NULL,
    CONSTRAINT [PK_dbo.CheckCodes] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[Devices] (
    [Id] [nvarchar](128) NOT NULL,
    CONSTRAINT [PK_dbo.Devices] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[Temperatures] (
    [Id] [int] NOT NULL IDENTITY,
    [DeviceId] [nvarchar](128) NOT NULL,
    [Value] [int] NOT NULL,
    [Time] [datetime] NOT NULL,
    CONSTRAINT [PK_dbo.Temperatures] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_DeviceId] ON [dbo].[Temperatures]([DeviceId])
CREATE TABLE [dbo].[UserDevices] (
    [Id] [int] NOT NULL IDENTITY,
    [Title] [nvarchar](256) NOT NULL,
    [DeviceId] [nvarchar](128),
    [UserDataId] [nvarchar](128),
    [ProfileId] [int] NOT NULL,
    [Period] [int] NOT NULL,
    CONSTRAINT [PK_dbo.UserDevices] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_DeviceId] ON [dbo].[UserDevices]([DeviceId])
CREATE INDEX [IX_UserDataId] ON [dbo].[UserDevices]([UserDataId])
CREATE INDEX [IX_ProfileId] ON [dbo].[UserDevices]([ProfileId])
CREATE TABLE [dbo].[Profiles] (
    [Id] [int] NOT NULL IDENTITY,
    [Title] [nvarchar](256) NOT NULL,
    [Description] [nvarchar](256) NOT NULL,
    [UserDataId] [nvarchar](128),
    CONSTRAINT [PK_dbo.Profiles] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_UserDataId] ON [dbo].[Profiles]([UserDataId])
CREATE TABLE [dbo].[Intervals] (
    [Id] [int] NOT NULL IDENTITY,
    [Start] [int] NOT NULL,
    [End] [int] NOT NULL,
    [Description] [nvarchar](256) NOT NULL,
    [ProfileId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.Intervals] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_ProfileId] ON [dbo].[Intervals]([ProfileId])
CREATE TABLE [dbo].[UserDatas] (
    [Id] [nvarchar](128) NOT NULL,
    [FirstName] [nvarchar](256) NOT NULL,
    [LastName] [nvarchar](256) NOT NULL,
    CONSTRAINT [PK_dbo.UserDatas] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[AspNetUserRoles] (
    [RoleId] [nvarchar](128) NOT NULL,
    [UserId] [nvarchar](128) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetUserRoles] PRIMARY KEY ([RoleId], [UserId])
)
CREATE INDEX [IX_RoleId] ON [dbo].[AspNetUserRoles]([RoleId])
CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserRoles]([UserId])
ALTER TABLE [dbo].[AspNetUserClaims] ADD CONSTRAINT [FK_dbo.AspNetUserClaims_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[AspNetUserLogins] ADD CONSTRAINT [FK_dbo.AspNetUserLogins_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[Temperatures] ADD CONSTRAINT [FK_dbo.Temperatures_dbo.Devices_DeviceId] FOREIGN KEY ([DeviceId]) REFERENCES [dbo].[Devices] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[UserDevices] ADD CONSTRAINT [FK_dbo.UserDevices_dbo.Devices_DeviceId] FOREIGN KEY ([DeviceId]) REFERENCES [dbo].[Devices] ([Id])
ALTER TABLE [dbo].[UserDevices] ADD CONSTRAINT [FK_dbo.UserDevices_dbo.UserDatas_UserDataId] FOREIGN KEY ([UserDataId]) REFERENCES [dbo].[UserDatas] ([Id])
ALTER TABLE [dbo].[UserDevices] ADD CONSTRAINT [FK_dbo.UserDevices_dbo.Profiles_ProfileId] FOREIGN KEY ([ProfileId]) REFERENCES [dbo].[Profiles] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[Profiles] ADD CONSTRAINT [FK_dbo.Profiles_dbo.UserDatas_UserDataId] FOREIGN KEY ([UserDataId]) REFERENCES [dbo].[UserDatas] ([Id])
ALTER TABLE [dbo].[Intervals] ADD CONSTRAINT [FK_dbo.Intervals_dbo.Profiles_ProfileId] FOREIGN KEY ([ProfileId]) REFERENCES [dbo].[Profiles] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[AspNetRoles] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201511141320044_InitialMigration', N'Portal.Migrations.Configuration',  0x1F8B0800000000000400ED5DDB6EE4B8117D0F907F10FA290966DDB667136C8CF62EBCBE6C8CCCD8C6B46791378356D36D6174E9486AAF8D205F96877C527E21A4AEBC8BA428B57A301860E096C862B178AA8A2C92A5FFFDE7BF8B9F5EA3D07B81691624F1E9ECE8E070E6C1D84F5641BC3E9D6DF3A7EF7E98FDF4E3EF7FB7B85C45AFDEAF75B9F7B81CAA1967A7B3E73CDF9CCCE799FF0C23901D44819F2659F2941FF8493407AB647E7C78F8D7F9D1D11C22123344CBF3169FB6711E44B0F8817E9E27B10F37F916841F93150CB3EA397AB32CA87A372082D906F8F0747697A439080FCA8207A8660E5FF3997716060031B384E1D3CC03719CE42047AC9E7CCEE0324F9378BDDCA00720BC7FDB4054EE098419ACBA70D216D7EDCDE131EECDBCAD5893F2B7599E4486048FDE57E299B3D5AD843C6BC487047889049DBFE15E17423C9D9D659B1B987F4A42D47DB6B993F330C5457929AFE055906679F5BBA5F1CE2B4BBE6BB0812084FFBDF3CEB761BE4DE1690CB7798A4BDC6D1FC3C0FF3B7CBB4FBEC0F834DE8621C92A6216BDA31EA0477769B28169FEF6093E551DB85ECDBC395D6FCE566CAA1175CA8E21302068CFBC8FE0F5038CD7F93302FDF10F33EF2A7885ABFA49858ECF7180340155CAD32DFA798318068F216CDECF956DE2FF15AD1EFFF92F4E5ABD012FC1BA183DA6FD729010FED36CE67D826151267B0E36A5961083F84015BD4A93083F25A14296785826DBD4C75D4B94C5EE41BA8639CDEF62DEE25103A598505F94621ADF502A6DF3320241E800A61AAD205BFD14A4116C7AF97382300362639EEF4096FD96A4ABBF81EC59C13AFAD301EB4BE86F5304CE650EA2CDE0ADDD3D2731BCD9468F18F8E3B5E56C68EE7F4BAE809F27E9658C6BF5A6F721F1BF24DBFC325E5D801C7ECEFD9A20FE791F44FA049CB073E6FB30CBAE1098E1EA3C4193989AE0759CBF3F3626876DD334DC04B6DE8EDD446DFF3BDC44ED4DCCDDDA79088248C5342EF4C09767391716937839715991ABD3EBC387641DC4067DA8CB77F4A12CA6D787AAAC23775D48C485CF2E08ED9DE396D90142124B641DE12F3086293261AB3B90E7308D310D584855C766EC62A2508C076E7470BF54B4F42B08B70334A5A192431914B13D541B9F9ECA58A8B60B652C08ED40198B76D1E39760850766DE5DA32E8CC86B95AFD5C954E519CEC6D646AA9B63373E9A0972AAAD66AE534B5B19376BA5ADE7CFD0FF8235CF5E4F1B127BE72E47745F8584A5AD7E3F449BE5FA845DAF288968C3E602BE047E0FCC94F5BF0146C3D8DCC36883276B481AE2993A51E0A11E97D6CAF06F39E3222862BA2CC2E6A8AC2AE6B17D2F60917BC971C897E865F4880EDB439820B277381E7E9D500ED32E4C2D3575B70B8C58584E9572D48877A1BBEC9A5AA1DE56AAD16A9ABD66B434BE2986005B793846C46D387DEC9E9D239D012334857E3E0521EC1EBD0E32300D12531A36CA6EE804595597BB495DDE2A817531D714137257BD55B1571731E5AFC68E9C41F4F2819A6B302C32EFC51309B650AFB944232C5B6B5911F8662AA7632A333F0D36E50188B11B1FD27C4AF50E0D254C5F1009A1E2D56F4576817DC7291C57C06A65D169132AEA628350BF945B83A6442F5350F7D5DE16D414BE19037E233C0769CFFDCECBB8E74C61A796C176B663351B30D279762620350AF62B92C200F45A8F200A7BA755E32D9A0B718D741680DDCA00A3B5DCA50A8AD895BE9311CE8B856EC86970CD74662C6553347DD651DCB32C4BFCA0E08DDB26E1772DE9AE23CBEC199C892871426FB520C0201D0E36486B1173485166AC76DEC617308439F4CEFCF26CEC39C87CB0E261823AB8B2E1AF995E88F8AB4E26D04CFE896B1B990E98628F08F081B50C19A320CE793B13C47EB001A1BED018129AC60A0BA3698C7D73013730C6DE5B5F343A5C88B74431274D83CC7075C96C3127B06901D96AEBCE0812EC1198A94196DD6714F157EDDF8F07595A68BB822C2D9A3D812C77424E8D06F9A96A1608E551FD2E0C74D25702AD83BE813004F17419A3AAE07ACB24B555A42F05D5AE5B4BBC8E020E6806AC9453CEFD083A291F179DC6DB38F74E94910FF1CA10A288F7B600217763F4C1A7D84FEDC2DEE1C1C1911B032F656204084965BB0708E256DEB251962FC3DB416E2352FAE89187F45ABA4D54606A964BC6FC08A0938D874ED3446C6777668B5AE22A6D8B78BDCB98AD2264A3615D54B4F5A1E7685A2AEDDE58564BD47DDD2968BD6FB05B08914188CE91164624DC0149B81568E75EFBC149D0CF31112590C3FE808ADE94D698F4281C62EF09D53E3A4539FBE3CEC526EF18CBC026BED48F6AC0B4E6A1D834B8786C2EFB73FB10A88FD556445685A2592461BA4B988B2EBDB5D154C1BA9B83A48850B9E097112A17D8DA84EA5B250A6A5528539B647DF45D41B20A3575906C4E9A8B881127D93BC83421728E466D1A3A08D04772392A54CCA0831415B2E72891E6AA8350BB39C151690C530709E2180047A35D49E87408F90C69770A77CE1021F4510420C1A527A286C61D29D67498ED37345D64148EB34866DB0442B275FF584F404BC8567AB5266A4A4F14F8360E7DBB921E13B11692ADFBE7487AFCB56399E0D4E15793002CD7AFCA4D748A4B1A72D51B000B21890E2FF302EA0AC9EA0665896ED0F657211945189620D7D8DFDE12119CF0E405D21123D48C1212FC533E44210D795C701061F067487859A8A35D7AF12E8279C28329E4208D7011945A77EA0614F4F9010928E41118CD180C0B8AD20F7741421872195816146615E2904613F4E309F64211850FF4F4AE9FED50284CD78A58774DDCCF7CB8559CFA4449B3F06ADE2DE66506B6EAC1622E49D5B6F808369B205E13A9DBAA27DEB2CCDB76FEDDD23C9B5954D298FB14F6D86562D3529EA4600D99B7E5DDCFE27C15C6D423C0E792CE5711578C5D664AA6D9756BFC4A921FB97AFA5DD7C17F936B5A268D1DB9F2E417E715912BD4C7082FEF8BF39CC2D90A5FD9C3A9F4400852C151B7F324DC46B13CD620AF5D9E1A23EB974F780A8B39C33D174BE084C5456268F91B8C8E6C4268373AC572DE7674C49587199D2AB51749A07A644883C80EC51123DEE953A513789134E937FA14992C5D2449E6950197642E2E8A49F285153D8944C525F45BE0B36F91D4F9B7FA940579B848D282D716B4053CB3EFF4A90A5275918405AFF569632DE66D5FFB7482F64F1A87B137826514B28F25945018C61CD667C4D82133A342A4412209118F0D6955B7A53962D5F30942491A94B28752197DEE03250905B9CDA1D2F7D026479973484EF38ECCC9439975554E22393D33C0EE0816C48E407F40B43B08E65050D41DC69E943B1D94DE0AF63E5414CAAC06948B1664B4DCE1E0CAD7FDA6232B8EB3690CABAC62BF31DD913CA9B0697FA192DB5CE69255D61E4665DA937D240DF9793F392581D7943ACCBD553F75E8CD142DC456A63958549587C14A75F79C1E9E9CDF4455D1708737F2200EEB8F650774E4D4884315CC3C4176D64241AB4A9E4111AA9E4D06C98A98BA298C2541570D0C4B6B4E19C0C47D671AC3C48BA161BC23D0B47B49FD51D39C9E30878DBCEA30B8A9EED95321ACF29141D82E666375B1A1A3768B3B1B83B74BA75BEC503972B9F8B88DA5C315561D0675C4FD739208F1D820A00744A4DAA7E38F35BDF325DBC1A14F9AE8EFD5D0F5E4DB32F22D00BCC9C7C62F95A75478096A610293131FE52418B0E64D7AA6558B37F91D4E196FEC8E263FF4DCC6265BA4015EB3C1C96C642EAA4DC5EE0F5371BB8C65919957877F901D7FCB72181DE00207CB7F86E7610071E0B92EF011C4C113CCF232E3C5ECF8F0E898F9B0D5743E3235CFB215E512955F9AA2876D84C41DF10B48FD6790F2A93B7A7CC54948B4488DE126A7AFCC3EEC95C0A80F0AE948CCFEFB418F41EEE4DB4135977F88C0EB1F4D59137E1FA81745C137805CD1732242D9377E6C6849BFEFB3423F7326EBAB4E67C5DFFBB1614DFAAD9F203627D6EE0D8E6D4A047B6C63D89342489D19C77A7D78A09521771FE43A5EC1D7D3D9BF8A7A27DEF53F1ECAAAEFBCDB1439DA13EFD0FB776F4BC77D11A59796F25F3D312067FD6D100B5CECD937399C39B63BFE931BCE68EF12D8165FAAD8DFD909F9190821D1EF7BE52A17792D075F79D817795BE5FFFF3A5C139BDEDB4887EBCA4EDD13E54B6CE62C43025BB69FB4B7E37F4FA64AB69CDDED185576C9E58D9D5559DD255344189918610D769A8A3437BDD2D7776B9A7166F36F1AA2D2102E23B033DA1300BB79EAEBAF032C54B2691BE745A49AB6A93E24AC463557E6599EF765B2C993E472283B1B323645F238E11BD59E91DEC048F77BDC2DBAEB262C0C6459D5E9A4778A0B69D77999A792CCB6CA42A2CA503270E6DA7133D4CAEE3BE8EA92B70F1994A702AE2A1F8D2A57CD57052ED90D8849824BEB5482303F86667EE341E1C5B855314772E83B059AE4AAEF4040531F42319B41EC106DA273269335665342DBB866CD026D3BB56D06A9CBEBDC3282CC65A3408B4A70264B7C360890A437089C83487DBB856F6E6F128F6B834727C92A4F8B7CBCE710505E59991C02B41387D7EFC7CE5DCA2760B2CC556E051BF9C50DE7B8519CF6179E4ED8B3D4DF2E32341B60D0712AE63100608235D5DD97E926EE7696A57B070E644C2418BA906980412FE1F6EEDDC8AE0034A22B31C4CFB8CE84B9DC409C71A2D39DB1E347270C26C3306D045B10A3292F349CCE568F091AEF320EAE4891AA4848DD912B5BDE5075C746BBA12A0EAD68AD2AA16E52921458DE6E15A254B45B9550B72B49A7CBB64B64DEE65A24DE89DA22337A77B452AB34D744FD42445F969E91254EAD5CB916A8B7A2665409691529BF3B327E8B5A52E59C641B6AAC31D74AF346D4C49D2C83234BBF9DB1730DB4AF442D48D3B44AB3892B93894BE524CAF4A9B03F1A06822DA6D61FB15D9A42B27349566881DB506CBD0949883F0E30F9FCE5FD0442D95B616A28570291E60DD7CD4C2EB9C229D92E115E24D5108A589DE4175207134F9DA1565B3CE25BA48E3133BE7806C8D54EFB30325D924A00024FCBE503EADF5D3E1CDA3311BB5D677957CFA6B3E9DF55C769D699490395BA44D55576324027AF7034A24364511726085776D54044D34B916EDEDD31402C883BF44D7E6E0B6497DD35C86CCE5FF4472BF36D8C6F3D94BF2E6016AC5B120B4433863EB5266FCA5CC74F491D1D6038AA8B3027D73EC21CAC1012CED23C78027E8E5EE3FBA741BC9E79C5550E7C0BFA11AEAEE3DB6DBED9E6A8CB307A0CA91B7538C4A06ABF48DF4EF3BCB82D0EB9662EBA80D80CF04591DBF8E76D10AE1ABEAF0467E52424F04AB43A468CC732C7C789D76F0DA59B24D6245489AF09B960EF162262D96DBC042FD0863704C00F700DFCB7F68AA18C48F740D0625F5C04609D8228AB68B4F5D14F84E155F4FAE3FF01F59161D4AEAD0000 , N'6.1.3-40302')

